language: c

sudo: false

matrix:
  include:
    - os: linux
      compiler: gcc
    - os: linux
      compiler: clang
    - os: osx
      compiler: clang
      env: DISTCHECK_CONFIGURE_FLAGS=--disable-docs

addons:
  apt:
    packages:
      - doxygen

before_script:
  - ./autogen.sh $DISTCHECK_CONFIGURE_FLAGS

script:
  - make
  - make check || (cat `find -name '*.log'` && false)
  - make distcheck || (cat `find -name '*.log'` && false)
